const { expect: playwrightExpect } = require('@playwright/test');

// Wrapper simples para o expect do Playwright
function expectWrapper(locator) {
    if (typeof locator !== 'object' || !locator.locator) {
        throw new Error('O expect só pode ser usado com objetos Locator.');
    }

    return new Proxy(playwrightExpect(locator), {
        get(target, prop) {
            if (prop === 'not') {
                // Lógica para manipular o "not"
                return new Proxy(target.not, {
                    get(target, method) {
                        return (...args) => target[method](...args);
                    }
                });
            }
            // Retorna os métodos normais do expect
            return (...args) => target[prop](...args);
        }
    });
}

module.exports = { expect: expectWrapper };
